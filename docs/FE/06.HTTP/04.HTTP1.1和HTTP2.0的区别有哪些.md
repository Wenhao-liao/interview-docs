# HTTP1.1和HTTP2.0的区别有哪些

## 1.二进制帧

HTTP1.1中
报文的头信息必须是文本（ASCII编码）
主体可以是文本，也可以是二进制

HTTP2.0则是一个彻底的二进制协议
头和主体都是二进制，统称为"帧"
其中，头的信息叫"头信息帧"，主体信息叫“数据帧"

帧的概念是实现多路复用的基础


## 2.多路复用

HTTP1.0：短链接
HTTP1.1：长链接，避免多次建立TCP链接
HTTP2.0：长链接的基础上增加多路复用


所谓多路复用就是

仍然复用TCP链接，但是在一个链接里，客户端和服务端都可以同时发送多个请求或者回应，而且不用按照顺序一一发送，避免了队头堵塞的问题

可以理解为由单车道，变成了几百个双向通行的车道


## 3.数据流

因为HTTP2.0是不按顺序发送的，同一个链接里面连续的数据包，可能属于不同的请求

因此，必须要对数据包做标记，指出他属于哪个请求

HTTP将每个请求或者响应的所有数据包，称为一个数据流，每个数据流都有一个独一无二的编号，数据包发送时都必须标记数据包ID，用来区分他属于哪个数据流


## 4.头信息压缩

由于HTTP1.1请求是无状态的，因此，在请求的时候，很多信息都是重复的，比如cookie和userAgent字段，这浪费了带宽，也影响了速度

HTTP2.0对这一点做出了优化，引入了头信息压缩机制

一方面，头信息使用Gizp或者Compress压缩后再发送；另一方面，客户端和服务器同时维护一张头信息表，所有字段都会存入这个表生成一个索引号，以后就不送同样的字段了，这样就能提高速度了


## 5.服务器推送（没什么人用）

HTTP2.0允许服务器未经请求，主动向客户端发送资源

使用服务器推送，提前给客户端推送必要的资源，这样就可以相对减少一些延迟时间

需要注意：在HTTP2.0下，服务器主动推送的是静态资源，和WebSocket以及使用SSE等方式向客户端发送即时数据的推送是不同的
